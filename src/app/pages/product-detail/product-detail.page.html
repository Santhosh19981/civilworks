<ion-header [translucent]="true">
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-button (click)="goBack()">
                <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title>Product Details</ion-title>
        <ion-buttons slot="end">
            <ion-button routerLink="/cart" class="cart-button">
                <ion-icon slot="icon-only" name="cart-outline"></ion-icon>
                <ion-badge *ngIf="cartCount > 0" class="cart-badge">{{ cartCount }}</ion-badge>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
    <div *ngIf="!loading && product">
        <!-- Product Image -->
        <div class="product-image-container">
            <img [src]="product.image" [alt]="product.name" class="detail-image">
        </div>

        <!-- Product Info -->
        <div class="product-details">
            <div class="product-header">
                <h1 class="product-title">{{ product.name }}</h1>
                <span class="badge badge-success" *ngIf="product.inStock">In Stock</span>
            </div>

            <div class="price-section">
                <div class="price-tag">
                    <span class="currency">₹</span>{{ product.price }}
                    <span class="unit" *ngIf="product.unit">/ {{ product.unit }}</span>
                </div>
            </div>

            <div class="category-tag">
                <ion-icon name="pricetag"></ion-icon>
                {{ product.category }}
            </div>

            <div class="description-section">
                <h3>Description</h3>
                <p>{{ product.description }}</p>
            </div>

            <!-- Quantity Selector -->
            <div class="quantity-section">
                <h3>Quantity</h3>
                <div class="quantity-selector">
                    <button class="quantity-btn" (click)="decreaseQuantity()">−</button>
                    <span class="quantity-value">{{ quantity }}</span>
                    <button class="quantity-btn" (click)="increaseQuantity()">+</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Skeleton Loader -->
    <div *ngIf="loading">
        <ion-skeleton-text [animated]="true" style="width: 100%; height: 300px;"></ion-skeleton-text>
        <div style="padding: 16px;">
            <ion-skeleton-text [animated]="true"
                style="width: 80%; height: 32px; margin-bottom: 12px;"></ion-skeleton-text>
            <ion-skeleton-text [animated]="true"
                style="width: 40%; height: 24px; margin-bottom: 16px;"></ion-skeleton-text>
            <ion-skeleton-text [animated]="true" style="width: 100%; height: 100px;"></ion-skeleton-text>
        </div>
    </div>
</ion-content>

<!-- Add to Cart Button -->
<ion-footer *ngIf="!loading && product">
    <ion-toolbar>
        <ion-button expand="block" class="cta-button" (click)="addToCart()">
            <ion-icon slot="start" name="cart"></ion-icon>
            Add to Cart
        </ion-button>
    </ion-toolbar>
</ion-footer>